Traceback (most recent call last):
  File "/home/peter/.local/lib/python3.10/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/home/peter/.local/lib/python3.10/site-packages/nbclient/client.py", line 1305, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
  File "/home/peter/.local/lib/python3.10/site-packages/jupyter_core/utils/__init__.py", line 166, in wrapped
    return loop.run_until_complete(inner)
  File "/usr/lib/python3.10/asyncio/base_events.py", line 649, in run_until_complete
    return future.result()
  File "/home/peter/.local/lib/python3.10/site-packages/nbclient/client.py", line 705, in async_execute
    await self.async_execute_cell(
  File "/home/peter/.local/lib/python3.10/site-packages/nbclient/client.py", line 1058, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/home/peter/.local/lib/python3.10/site-packages/nbclient/client.py", line 914, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
import numpy as np

from bokeh.layouts import column, row
from bokeh.models import ColumnDataSource, CustomJS, Slider, MultiLine
from bokeh.plotting import figure, show
from bokeh.io import output_file
from bokeh.resources import CDN
from bokeh.embed import file_html
import IPython

# needed if using show() in some browser installations
# (not this exact location, of course; but something the
#  browser can access)
output_file("/Users/clinic/Desktop/HRL html/temp.html")
xs = np.linspace(-300e-9, 500e-9, 10000)
ys = np.zeros_like(xs)
GATE_WIDTH = 50e-9
DOT_WIDTH = 90e-9
GAP = 10e-9
V1 = 1e-3
VP = -1e-3
V2= 1e-3
VD = -1e-5
V0 = 0
DEPTH = 50e-9
HEIGHT = 1
INF = 1e5


for i, x in enumerate(xs):
    ys[i] = GatePotential(GATE_WIDTH,DOT_WIDTH, GAP, V1, VP, V2, VD,V0, DEPTH,HEIGHT, INF,x )


source = ColumnDataSource(data=dict(x = xs, y = ys))

plot = figure(y_range=(-9e-4, 14e-4), x_range=(-300e-9, 500e-9), width=800, height=800,
              x_axis_label=r"$$\text{X Position}$$",
              y_axis_label=r"$$\text{ Potential(V)}$$")

plot.line("x","y",source=source)


voltage_slider = Slider(start=-0.004, end=0.007, value= 0.001, step=0.001,format = '0.000', title=r"$$V_1$$")

callback = CustomJS(args=dict(source=source, GATE_WIDTH = GATE_WIDTH, DOT_WIDTH = DOT_WIDTH, GAP = GAP, V1 = voltage_slider, VP = VP, V2= V2, VD = VD, V0 = V0, DEPTH = DEPTH, HEIGHT = HEIGHT, INF = INF),
                    code="""
    const v1n = V1.value

    const x = source.data.x
    const y = []
    
    function g(u, v, d) {
        const R = Math.sqrt(u ** 2 + v ** 2 + d ** 2);
        return (1 / (2 * Math.PI)) * Math.atan((u * v) / (d * R));
    }

    function phi_rect(x, y, d, Vg, L, R, B, T) {
        return Vg * (g(x - L, y - B, d) + g(x - L, T - y, d) + g(R - x, y - B, d) + g(R - x, T - y, d));
    }

    function GatePotential(gate_width, dot_width, gap, V1, VP, V2, VD, V0, depth, height, inf, x, y = 0) {
        let out = 0;
        out += phi_rect(x, y, depth, V0, -inf, 0, -inf, inf);
        out += phi_rect(x, y, depth, V1, gap, gate_width + gap, -height / 2, height / 2);
        out += phi_rect(x, y, depth, VP, gate_width + 2 * gap, gate_width + 2 * gap + dot_width, -height / 2, height / 2);
        out += phi_rect(x, y, depth, V2, gate_width + 3 * gap + dot_width, 2 * gate_width + 3 * gap + dot_width, -height / 2, height / 2);
        out += phi_rect(x, y, depth, VD, 2 * gate_width + 4 * gap + dot_width, inf, -inf, inf);
        return out;
    }
    
    for (let i = 0; i < x.length; i++) {
        y[i] = GatePotential(GATE_WIDTH, DOT_WIDTH, GAP, v1n, VP, V2, VD, V0, DEPTH, HEIGHT, INF, x[i]);
    }

    source.data = {x, y}
""")

voltage_slider.js_on_change('value', callback)


# html_repr = file_html(row(plot, column(voltage_slider)), CDN)
# IPython.display.HTML(html_repr)
# # debugging
show(row(plot, column(voltage_slider)))
------------------


[0;31m---------------------------------------------------------------------------[0m
[0;31mFileNotFoundError[0m                         Traceback (most recent call last)
Cell [0;32mIn[2], line 84[0m
[1;32m     78[0m voltage_slider[38;5;241m.[39mjs_on_change([38;5;124m'[39m[38;5;124mvalue[39m[38;5;124m'[39m, callback)
[1;32m     81[0m [38;5;66;03m# html_repr = file_html(row(plot, column(voltage_slider)), CDN)[39;00m
[1;32m     82[0m [38;5;66;03m# IPython.display.HTML(html_repr)[39;00m
[1;32m     83[0m [38;5;66;03m# # debugging[39;00m
[0;32m---> 84[0m [43mshow[49m[43m([49m[43mrow[49m[43m([49m[43mplot[49m[43m,[49m[43m [49m[43mcolumn[49m[43m([49m[43mvoltage_slider[49m[43m)[49m[43m)[49m[43m)[49m

File [0;32m~/.local/lib/python3.10/site-packages/bokeh/io/showing.py:143[0m, in [0;36mshow[0;34m(obj, browser, new, notebook_handle, notebook_url, **kwargs)[0m
[1;32m    140[0m state [38;5;241m=[39m curstate()
[1;32m    142[0m [38;5;28;01mif[39;00m [38;5;28misinstance[39m(obj, UIElement):
[0;32m--> 143[0m     [38;5;28;01mreturn[39;00m [43m_show_with_state[49m[43m([49m[43mobj[49m[43m,[49m[43m [49m[43mstate[49m[43m,[49m[43m [49m[43mbrowser[49m[43m,[49m[43m [49m[43mnew[49m[43m,[49m[43m [49m[43mnotebook_handle[49m[38;5;241;43m=[39;49m[43mnotebook_handle[49m[43m)[49m
[1;32m    145[0m [38;5;28;01mdef[39;00m [38;5;21mis_application[39m(obj: Any) [38;5;241m-[39m[38;5;241m>[39m TypeGuard[Application]:
[1;32m    146[0m     [38;5;28;01mreturn[39;00m [38;5;28mgetattr[39m(obj, [38;5;124m'[39m[38;5;124m_is_a_bokeh_application_class[39m[38;5;124m'[39m, [38;5;28;01mFalse[39;00m)

File [0;32m~/.local/lib/python3.10/site-packages/bokeh/io/showing.py:194[0m, in [0;36m_show_with_state[0;34m(obj, state, browser, new, notebook_handle)[0m
[1;32m    191[0m     shown [38;5;241m=[39m [38;5;28;01mTrue[39;00m
[1;32m    193[0m [38;5;28;01mif[39;00m state[38;5;241m.[39mfile [38;5;129;01mor[39;00m [38;5;129;01mnot[39;00m shown:
[0;32m--> 194[0m     [43m_show_file_with_state[49m[43m([49m[43mobj[49m[43m,[49m[43m [49m[43mstate[49m[43m,[49m[43m [49m[43mnew[49m[43m,[49m[43m [49m[43mcontroller[49m[43m)[49m
[1;32m    196[0m [38;5;28;01mreturn[39;00m comms_handle

File [0;32m~/.local/lib/python3.10/site-packages/bokeh/io/showing.py:175[0m, in [0;36m_show_file_with_state[0;34m(obj, state, new, controller)[0m
[1;32m    171[0m [38;5;28;01mdef[39;00m [38;5;21m_show_file_with_state[39m(obj: UIElement, state: State, new: BrowserTarget, controller: BrowserLike) [38;5;241m-[39m[38;5;241m>[39m [38;5;28;01mNone[39;00m:
[1;32m    172[0m [38;5;250m    [39m[38;5;124;03m'''[39;00m
[1;32m    173[0m 
[1;32m    174[0m [38;5;124;03m    '''[39;00m
[0;32m--> 175[0m     filename [38;5;241m=[39m [43msave[49m[43m([49m[43mobj[49m[43m,[49m[43m [49m[43mstate[49m[38;5;241;43m=[39;49m[43mstate[49m[43m)[49m
[1;32m    176[0m     controller[38;5;241m.[39mopen([38;5;124m"[39m[38;5;124mfile://[39m[38;5;124m"[39m [38;5;241m+[39m filename, new[38;5;241m=[39mNEW_PARAM[new])

File [0;32m~/.local/lib/python3.10/site-packages/bokeh/io/saving.py:98[0m, in [0;36msave[0;34m(obj, filename, resources, title, template, state)[0m
[1;32m     95[0m theme [38;5;241m=[39m state[38;5;241m.[39mdocument[38;5;241m.[39mtheme
[1;32m     97[0m filename, resources, title [38;5;241m=[39m _get_save_args(state, filename, resources, title)
[0;32m---> 98[0m [43m_save_helper[49m[43m([49m[43mobj[49m[43m,[49m[43m [49m[43mfilename[49m[43m,[49m[43m [49m[43mresources[49m[43m,[49m[43m [49m[43mtitle[49m[43m,[49m[43m [49m[43mtemplate[49m[43m,[49m[43m [49m[43mtheme[49m[43m)[49m
[1;32m     99[0m [38;5;28;01mreturn[39;00m abspath(expanduser(filename))

File [0;32m~/.local/lib/python3.10/site-packages/bokeh/io/saving.py:166[0m, in [0;36m_save_helper[0;34m(obj, filename, resources, title, template, theme)[0m
[1;32m    163[0m [38;5;28;01mfrom[39;00m [38;5;21;01m.[39;00m[38;5;21;01m.[39;00m[38;5;21;01membed[39;00m [38;5;28;01mimport[39;00m file_html
[1;32m    164[0m html [38;5;241m=[39m file_html(obj, resources[38;5;241m=[39mresources, title[38;5;241m=[39mtitle, template[38;5;241m=[39mtemplate [38;5;129;01mor[39;00m FILE, theme[38;5;241m=[39mtheme)
[0;32m--> 166[0m [38;5;28;01mwith[39;00m [38;5;28;43mopen[39;49m[43m([49m[43mfilename[49m[43m,[49m[43m [49m[43mmode[49m[38;5;241;43m=[39;49m[38;5;124;43m"[39;49m[38;5;124;43mw[39;49m[38;5;124;43m"[39;49m[43m,[49m[43m [49m[43mencoding[49m[38;5;241;43m=[39;49m[38;5;124;43m"[39;49m[38;5;124;43mutf-8[39;49m[38;5;124;43m"[39;49m[43m)[49m [38;5;28;01mas[39;00m f:
[1;32m    167[0m     f[38;5;241m.[39mwrite(html)

[0;31mFileNotFoundError[0m: [Errno 2] No such file or directory: '/Users/clinic/Desktop/HRL html/temp.html'

